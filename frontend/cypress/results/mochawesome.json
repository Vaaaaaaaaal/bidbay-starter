{
  "stats": {
    "suites": 8,
    "tests": 31,
    "passes": 31,
    "pending": 0,
    "failures": 0,
    "start": "2024-04-05T09:13:47.778Z",
    "end": "2024-04-05T09:13:49.207Z",
    "duration": 1429,
    "testsRegistered": 31,
    "passPercent": 100,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "0d67ee0d-eb85-4001-b828-89a5cf63355c",
      "title": "",
      "fullFile": "cypress/e2e/backend/endpoints.cy.js",
      "file": "cypress/e2e/backend/endpoints.cy.js",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "9cd5c0fe-e348-414b-a9ab-56310beeaea7",
          "title": "GET /api/products",
          "fullFile": "",
          "file": "",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "returns 200 - success",
              "fullTitle": "GET /api/products returns 200 - success",
              "timedOut": null,
              "duration": 291,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request(endpoint).then(response => {\n  expect(response.status).to.be.eq(200);\n  expect(response.headers[\"content-type\"]).to.contains(\"application/json\");\n  for (let product of response.body) {\n    expect(product.id).to.be.a(\"string\");\n    expect(product.id).to.be.match(_pattern.UUIDv4);\n    expect(product.name).to.be.a(\"string\");\n    expect(product.description).to.be.a(\"string\");\n    expect(product.category).to.be.a(\"string\");\n    expect(product.originalPrice).to.be.a(\"number\");\n    expect(product.pictureUrl).to.be.a(\"string\");\n    expect(product.endDate).to.be.a(\"string\");\n    expect(product.endDate).to.match(_pattern.IOS8601);\n    expect(product.seller.id).to.be.a(\"string\");\n    expect(product.seller.username).to.be.a(\"string\");\n    for (let bid of product.bids) {\n      expect(bid.id).to.be.a(\"string\");\n      expect(bid.id).to.match(_pattern.UUIDv4);\n      expect(bid.price).to.be.a(\"number\");\n      expect(bid.date).to.be.a(\"string\");\n      expect(bid.date).to.match(_pattern.IOS8601);\n    }\n    const fixtureProduct = response.body.find(item => {\n      return item.id === \"a0f7c522-78f8-442e-a55d-642cfe566634\";\n    });\n    expect(fixtureProduct.id).to.be.eq(\"a0f7c522-78f8-442e-a55d-642cfe566634\");\n    expect(fixtureProduct.name).to.be.eq(\"Lot de casseroles\");\n    expect(fixtureProduct.description).to.be.eq(\"Ensemble de casseroles de qualité supérieure pour répondre à tous vos besoins culinaires.\");\n    expect(fixtureProduct.category).to.be.eq(\"Cuisine\");\n    expect(fixtureProduct.originalPrice).to.be.eq(40);\n    expect(fixtureProduct.pictureUrl).to.be.eq(\"https://image.noelshack.com/fichiers/2023/12/4/1679526253-65535-51812547429-fe1cc0d832-c-512-512-nofilter.jpg\");\n    expect(fixtureProduct.seller.id).to.be.eq(_tokens.aliceId);\n    expect(fixtureProduct.seller.username).to.be.eq(\"alice\");\n    expect(fixtureProduct.bids.some(bid => bid.price === 65)).to.be.true;\n  }\n});",
              "err": {},
              "uuid": "74ed9b8e-b05e-414c-9724-9a7ac3ba8b24",
              "parentUUID": "9cd5c0fe-e348-414b-a9ab-56310beeaea7",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "74ed9b8e-b05e-414c-9724-9a7ac3ba8b24"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 291,
          "root": false,
          "rootEmpty": false,
          "_timeout": 2000
        },
        {
          "uuid": "663e6380-f6d5-49b0-973c-7b819900b776",
          "title": "POST /api/products",
          "fullFile": "",
          "file": "",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "returns 401 - not authorized",
              "fullTitle": "POST /api/products returns 401 - not authorized",
              "timedOut": null,
              "duration": 37,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  method: \"POST\",\n  url: \"http://localhost:3000/api/products\",\n  headers: {\n    Authorization: `Bearer BAD_TOKEN`\n  },\n  body: {\n    name: \"New Product\",\n    description: \"This is a new product\",\n    category: \"Electronics\",\n    originalPrice: 99,\n    pictureUrl: \"https://example.com/product.jpg\",\n    endDate: \"2023-04-01T00:00:00.000Z\"\n  },\n  failOnStatusCode: false\n}).its(\"status\").should(\"equal\", 401);",
              "err": {},
              "uuid": "fe52c57a-a3ed-4841-9b33-80952d81f1bf",
              "parentUUID": "663e6380-f6d5-49b0-973c-7b819900b776",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "returns 201 - created",
              "fullTitle": "POST /api/products returns 201 - created",
              "timedOut": null,
              "duration": 35,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Create a new product\ncy.request({\n  method: \"POST\",\n  url: \"http://localhost:3000/api/products\",\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  body: {\n    name: \"New Product\",\n    description: \"This is a new product\",\n    category: \"Electronics\",\n    originalPrice: 99,\n    pictureUrl: \"https://example.com/product.jpg\",\n    endDate: \"2023-04-01T00:00:00.000Z\"\n  }\n}).then(response => {\n  // Assert that the response is as expected\n  expect(response.status).to.eq(201);\n  expect(response.body.id).to.be.match(_pattern.UUIDv4);\n  expect(response.body.name).to.eq(\"New Product\");\n  expect(response.body.description).to.eq(\"This is a new product\");\n  expect(response.body.category).to.eq(\"Electronics\");\n  expect(response.body.originalPrice).to.eq(99);\n  expect(response.body.pictureUrl).to.eq(\"https://example.com/product.jpg\");\n  expect(response.body.endDate).to.eq(\"2023-04-01T00:00:00.000Z\");\n  expect(response.body.sellerId).to.eq(_tokens.aliceId);\n});",
              "err": {},
              "uuid": "91fc753b-10c6-49ea-b432-57d8a27c1c58",
              "parentUUID": "663e6380-f6d5-49b0-973c-7b819900b776",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "returns 400 - missing or invalid fields",
              "fullTitle": "POST /api/products returns 400 - missing or invalid fields",
              "timedOut": null,
              "duration": 27,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Create a new product\ncy.request({\n  method: \"POST\",\n  url: \"http://localhost:3000/api/products\",\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  body: {\n    // Missing name: \"Machine à écrire\",\n    description: \"Machine à écrire vintage en parfait état de fonctionnement pour une expérience d'écriture unique et authentique.\",\n    pictureUrl: \"https://picsum.photos/id/403/512/512\",\n    category: \"High-Tech\",\n    originalPrice: 200,\n    endDate: \"2026-01-01T09:00:00Z\"\n  },\n  failOnStatusCode: false\n}).then(req => {\n  expect(req.status).to.be.eq(400);\n  expect(req.body.error).to.be.eq(\"Invalid or missing fields\");\n  expect(req.body.details).to.exist;\n});",
              "err": {},
              "uuid": "dc9f0a96-9858-4a7d-89d0-bc1937e8b40a",
              "parentUUID": "663e6380-f6d5-49b0-973c-7b819900b776",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "check mutation - object created in database",
              "fullTitle": "POST /api/products check mutation - object created in database",
              "timedOut": null,
              "duration": 34,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Create a new product\n(0, _orm.getProducts)().then(({\n  products: productsBeforeCreation\n}) => {\n  (0, _orm.createProduct)().then(({\n    product\n  }) => {\n    (0, _orm.getProducts)().then(({\n      products: productsAfterCreation\n    }) => {\n      const newProducts = productsAfterCreation.filter(product => productsBeforeCreation.every(existingProduct => existingProduct.id !== product.id));\n      expect(newProducts.length).to.be.eq(1);\n      const newProduct = newProducts[0];\n      expect(newProduct.id).to.be.match(_pattern.UUIDv4);\n      expect(newProduct.name).to.eq(name);\n      expect(newProduct.description).to.eq(product.description);\n      expect(newProduct.category).to.eq(product.category);\n      expect(newProduct.originalPrice).to.eq(product.originalPrice);\n      expect(newProduct.pictureUrl).to.eq(product.pictureUrl);\n      expect(newProduct.endDate).to.eq(product.endDate);\n      expect(newProduct.seller.id).to.eq(_tokens.aliceId);\n      expect(newProduct.seller.username).to.eq(\"alice\");\n    });\n  });\n});",
              "err": {},
              "uuid": "44de85df-9b58-4cd7-9472-90787edc2c54",
              "parentUUID": "663e6380-f6d5-49b0-973c-7b819900b776",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "fe52c57a-a3ed-4841-9b33-80952d81f1bf",
            "91fc753b-10c6-49ea-b432-57d8a27c1c58",
            "dc9f0a96-9858-4a7d-89d0-bc1937e8b40a",
            "44de85df-9b58-4cd7-9472-90787edc2c54"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 133,
          "root": false,
          "rootEmpty": false,
          "_timeout": 2000
        },
        {
          "uuid": "6ad36967-8925-4e78-a907-95cf08e5c5f4",
          "title": "GET /api/products/:productId",
          "fullFile": "",
          "file": "",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "returns 404 - not found",
              "fullTitle": "GET /api/products/:productId returns 404 - not found",
              "timedOut": null,
              "duration": 27,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  url: \"http://localhost:3000/api/products/not-existing-id\",\n  failOnStatusCode: false\n}).its(\"status\").should(\"equal\", 404);",
              "err": {},
              "uuid": "f422c946-56da-4163-a798-fe7ecbef2f79",
              "parentUUID": "6ad36967-8925-4e78-a907-95cf08e5c5f4",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "returns 200 - success",
              "fullTitle": "GET /api/products/:productId returns 200 - success",
              "timedOut": null,
              "duration": 26,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request(endpoint).then(response => {\n  expect(response.status).to.be.eq(200);\n  expect(response.headers[\"content-type\"]).to.includes(\"application/json\");\n  const product = response.body;\n  expect(product.id).to.be.eq(\"a0f7c522-78f8-442e-a55d-642cfe566634\");\n  expect(product.name).to.be.eq(\"Lot de casseroles\");\n  expect(product.description).to.be.eq(\"Ensemble de casseroles de qualité supérieure pour répondre à tous vos besoins culinaires.\");\n  expect(product.category).to.be.eq(\"Cuisine\");\n  expect(product.originalPrice).to.be.eq(40);\n  expect(product.pictureUrl).to.be.eq(\"https://image.noelshack.com/fichiers/2023/12/4/1679526253-65535-51812547429-fe1cc0d832-c-512-512-nofilter.jpg\");\n  expect(product.seller.id).to.be.eq(_tokens.aliceId);\n  expect(product.seller.username).to.be.eq(\"alice\");\n  const bid = response.body.bids.find(bid => bid.price === 65);\n  expect(bid.id).to.be.eq(\"8ccc6e79-f3c9-43e9-b47e-5be7b84d8de7\");\n  expect(bid.bidder.id).to.be.eq(_tokens.charlyId);\n  expect(bid.bidder.username).to.be.eq(\"charly\");\n});",
              "err": {},
              "uuid": "d7d4ee72-f49b-4a7b-9cd7-7bb354c8cd50",
              "parentUUID": "6ad36967-8925-4e78-a907-95cf08e5c5f4",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "f422c946-56da-4163-a798-fe7ecbef2f79",
            "d7d4ee72-f49b-4a7b-9cd7-7bb354c8cd50"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 53,
          "root": false,
          "rootEmpty": false,
          "_timeout": 2000
        },
        {
          "uuid": "27f882ee-a9f7-42c7-8dd6-5b15c414463e",
          "title": "PUT /api/products/:productId",
          "fullFile": "",
          "file": "",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "returns 401 - not authorized",
              "fullTitle": "PUT /api/products/:productId returns 401 - not authorized",
              "timedOut": null,
              "duration": 24,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  method: \"PUT\",\n  url: endpoint,\n  headers: {\n    Authorization: `Bearer BAD_TOKEN`\n  },\n  body: {\n    name: \"Machine à écrire\",\n    description: \"Machine à écrire vintage en parfait état de fonctionnement pour une expérience d'écriture unique et authentique.\",\n    pictureUrl: \"https://picsum.photos/id/403/512/512\",\n    category: \"High-Tech\",\n    originalPrice: 200,\n    endDate: \"2026-01-01T09:00:00Z\"\n  },\n  failOnStatusCode: false\n}).its(\"status\").should(\"equal\", 401);",
              "err": {},
              "uuid": "bed46417-2789-4834-8191-fe4cd0bbd7d2",
              "parentUUID": "27f882ee-a9f7-42c7-8dd6-5b15c414463e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "returns 200 - success, when owner edit",
              "fullTitle": "PUT /api/products/:productId returns 200 - success, when owner edit",
              "timedOut": null,
              "duration": 33,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  url: endpoint,\n  method: \"PUT\",\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  body: {\n    name: \"Machine à écrire\",\n    description: \"Machine à écrire vintage en parfait état de fonctionnement pour une expérience d'écriture unique et authentique.\",\n    pictureUrl: \"https://picsum.photos/id/403/512/512\",\n    category: \"High-Tech\",\n    originalPrice: 200,\n    endDate: \"2026-01-01T09:00:00Z\"\n  }\n}).its(\"status\").should(\"equal\", 200);",
              "err": {},
              "uuid": "1fedd0b2-4fd0-46ac-9f34-c41ac96082f9",
              "parentUUID": "27f882ee-a9f7-42c7-8dd6-5b15c414463e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "returns 403 - forbidden, when non owner edit",
              "fullTitle": "PUT /api/products/:productId returns 403 - forbidden, when non owner edit",
              "timedOut": null,
              "duration": 30,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  url: endpoint,\n  method: \"PUT\",\n  headers: {\n    Authorization: `Bearer ${_tokens.bobToken}`\n  },\n  body: {\n    name: \"Machine à écrire\",\n    description: \"Machine à écrire vintage en parfait état de fonctionnement pour une expérience d'écriture unique et authentique.\",\n    pictureUrl: \"https://picsum.photos/id/403/512/512\",\n    category: \"High-Tech\",\n    originalPrice: 200,\n    endDate: \"2026-01-01T09:00:00Z\"\n  },\n  failOnStatusCode: false\n}).its(\"status\").should(\"equal\", 403);",
              "err": {},
              "uuid": "d6c92fa5-79cb-4ed5-a9bc-c683212fe683",
              "parentUUID": "27f882ee-a9f7-42c7-8dd6-5b15c414463e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "returns 200 - success, when admin edit",
              "fullTitle": "PUT /api/products/:productId returns 200 - success, when admin edit",
              "timedOut": null,
              "duration": 23,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  url: endpoint,\n  method: \"PUT\",\n  headers: {\n    Authorization: `Bearer ${_tokens.adminToken}`\n  },\n  body: {\n    name: \"Machine à écrire\",\n    description: \"Machine à écrire vintage en parfait état de fonctionnement pour une expérience d'écriture unique et authentique.\",\n    pictureUrl: \"https://picsum.photos/id/403/512/512\",\n    category: \"High-Tech\",\n    originalPrice: 200,\n    endDate: \"2026-01-01T09:00:00Z\"\n  }\n}).its(\"status\").should(\"equal\", 200);",
              "err": {},
              "uuid": "843bfe62-16b8-4d89-a213-46be9ca48096",
              "parentUUID": "27f882ee-a9f7-42c7-8dd6-5b15c414463e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "returns 404 - not found",
              "fullTitle": "PUT /api/products/:productId returns 404 - not found",
              "timedOut": null,
              "duration": 27,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  url: \"http://localhost:3000/api/products/not-existing-id\",\n  method: \"PUT\",\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  body: {\n    name: \"Machine à écrire\",\n    description: \"Machine à écrire vintage en parfait état de fonctionnement pour une expérience d'écriture unique et authentique.\",\n    pictureUrl: \"https://picsum.photos/id/403/512/512\",\n    category: \"High-Tech\",\n    originalPrice: 200,\n    endDate: \"2026-01-01T09:00:00Z\"\n  },\n  failOnStatusCode: false\n}).its(\"status\").should(\"equal\", 404);",
              "err": {},
              "uuid": "d25b33a4-561f-4d91-b7ac-0972115d8668",
              "parentUUID": "27f882ee-a9f7-42c7-8dd6-5b15c414463e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "check mutation - object updated in database",
              "fullTitle": "PUT /api/products/:productId check mutation - object updated in database",
              "timedOut": null,
              "duration": 33,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const newProductData = (0, _orm.buildProduct)();\ncy.request({\n  url: endpoint,\n  method: \"PUT\",\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  body: {\n    name: newProductData.name,\n    description: newProductData.description,\n    pictureUrl: newProductData.pictureUrl,\n    category: newProductData.category,\n    originalPrice: newProductData.originalPrice,\n    endDate: newProductData.endDate.toISOString()\n  }\n}).then(() => {\n  cy.request(endpoint).then(response => {\n    const product = response.body;\n    expect(response.status).to.be.eq(200);\n    expect(product.id).to.be.eq(\"a0f7c522-78f8-442e-a55d-642cfe566634\");\n    expect(product.name).to.be.eq(newProductData.name);\n    expect(product.description).to.be.eq(newProductData.description);\n    expect(product.category).to.be.eq(newProductData.category);\n    expect(product.originalPrice).to.be.eq(newProductData.originalPrice);\n    expect(product.pictureUrl).to.be.eq(newProductData.pictureUrl);\n    expect(product.endDate).to.be.eq(newProductData.endDate.toISOString());\n    expect(product.seller.id).to.be.eq(_tokens.aliceId);\n    expect(product.seller.username).to.be.eq(\"alice\");\n  });\n});",
              "err": {},
              "uuid": "d43944a3-6469-4b12-bf85-760a4e21a96f",
              "parentUUID": "27f882ee-a9f7-42c7-8dd6-5b15c414463e",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "bed46417-2789-4834-8191-fe4cd0bbd7d2",
            "1fedd0b2-4fd0-46ac-9f34-c41ac96082f9",
            "d6c92fa5-79cb-4ed5-a9bc-c683212fe683",
            "843bfe62-16b8-4d89-a213-46be9ca48096",
            "d25b33a4-561f-4d91-b7ac-0972115d8668",
            "d43944a3-6469-4b12-bf85-760a4e21a96f"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 170,
          "root": false,
          "rootEmpty": false,
          "_timeout": 2000
        },
        {
          "uuid": "96bd1c3b-e5d3-499f-8e82-3c236f6a6fad",
          "title": "DELETE /api/products/:productId",
          "fullFile": "",
          "file": "",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "returns 401 - not authorized",
              "fullTitle": "DELETE /api/products/:productId returns 401 - not authorized",
              "timedOut": null,
              "duration": 27,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  method: \"DELETE\",\n  url: endpoint,\n  headers: {\n    Authorization: `Bearer BAD_TOKEN`\n  },\n  failOnStatusCode: false\n}).its(\"status\").should(\"equal\", 401);",
              "err": {},
              "uuid": "f3f14be8-7859-44aa-8e8c-d539df1a5d26",
              "parentUUID": "96bd1c3b-e5d3-499f-8e82-3c236f6a6fad",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "returns 204 - success, when owner edit",
              "fullTitle": "DELETE /api/products/:productId returns 204 - success, when owner edit",
              "timedOut": null,
              "duration": 29,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  url: endpoint,\n  method: \"DELETE\",\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  }\n}).its(\"status\").should(\"equal\", 204);",
              "err": {},
              "uuid": "98eda7f0-fd98-46cc-965e-ff581fce468b",
              "parentUUID": "96bd1c3b-e5d3-499f-8e82-3c236f6a6fad",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "returns 403 - forbidden, when non owner edit",
              "fullTitle": "DELETE /api/products/:productId returns 403 - forbidden, when non owner edit",
              "timedOut": null,
              "duration": 24,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  url: endpoint,\n  method: \"DELETE\",\n  headers: {\n    Authorization: `Bearer ${_tokens.bobToken}`\n  },\n  failOnStatusCode: false\n}).its(\"status\").should(\"equal\", 403);",
              "err": {},
              "uuid": "11f68cbb-110f-4c5e-95fc-b287e9fd8f98",
              "parentUUID": "96bd1c3b-e5d3-499f-8e82-3c236f6a6fad",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "returns 204 - success, when admin edit",
              "fullTitle": "DELETE /api/products/:productId returns 204 - success, when admin edit",
              "timedOut": null,
              "duration": 20,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  url: endpoint,\n  method: \"DELETE\",\n  headers: {\n    Authorization: `Bearer ${_tokens.adminToken}`\n  }\n}).its(\"status\").should(\"equal\", 204);",
              "err": {},
              "uuid": "af9f15c8-804c-4b64-8c1e-b9acca6190e0",
              "parentUUID": "96bd1c3b-e5d3-499f-8e82-3c236f6a6fad",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "returns 404 - not found",
              "fullTitle": "DELETE /api/products/:productId returns 404 - not found",
              "timedOut": null,
              "duration": 27,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  url: \"http://localhost:3000/api/products/not-existing-id\",\n  method: \"DELETE\",\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  failOnStatusCode: false\n}).its(\"status\").should(\"equal\", 404);",
              "err": {},
              "uuid": "48368730-94bf-4db3-b8f4-17dbd80e77c3",
              "parentUUID": "96bd1c3b-e5d3-499f-8e82-3c236f6a6fad",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "check mutation - object deleted in database",
              "fullTitle": "DELETE /api/products/:productId check mutation - object deleted in database",
              "timedOut": null,
              "duration": 35,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  url: endpoint,\n  method: \"GET\",\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  }\n}).then(response => {\n  expect(response.status).to.be.eq(200);\n  cy.request({\n    url: endpoint,\n    method: \"DELETE\",\n    headers: {\n      Authorization: `Bearer ${_tokens.aliceToken}`\n    }\n  }).then(response => {\n    expect(response.status).to.be.eq(204);\n    cy.request({\n      url: endpoint,\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${_tokens.aliceToken}`\n      },\n      failOnStatusCode: false\n    }).then(response => {\n      expect(response.status).to.be.eq(404);\n    });\n  });\n});",
              "err": {},
              "uuid": "8dc87aed-b48c-4716-8270-e52b3ece421a",
              "parentUUID": "96bd1c3b-e5d3-499f-8e82-3c236f6a6fad",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "f3f14be8-7859-44aa-8e8c-d539df1a5d26",
            "98eda7f0-fd98-46cc-965e-ff581fce468b",
            "11f68cbb-110f-4c5e-95fc-b287e9fd8f98",
            "af9f15c8-804c-4b64-8c1e-b9acca6190e0",
            "48368730-94bf-4db3-b8f4-17dbd80e77c3",
            "8dc87aed-b48c-4716-8270-e52b3ece421a"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 162,
          "root": false,
          "rootEmpty": false,
          "_timeout": 2000
        },
        {
          "uuid": "de10be9e-ca78-4ed1-89f4-f1badf3b1176",
          "title": "POST /api/products/:productId/bids",
          "fullFile": "",
          "file": "",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "returns 401 - not authorized",
              "fullTitle": "POST /api/products/:productId/bids returns 401 - not authorized",
              "timedOut": null,
              "duration": 27,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  method: \"POST\",\n  url: \"http://localhost:3000/api/products/a0f7c522-78f8-442e-a55d-642cfe566634/bids\",\n  headers: {\n    Authorization: `Bearer BAD_TOKEN`\n  },\n  body: {\n    name: \"New Product\",\n    description: \"This is a new product\",\n    category: \"Electronics\",\n    originalPrice: 99,\n    pictureUrl: \"https://example.com/product.jpg\",\n    endDate: \"2023-04-01T00:00:00.000Z\"\n  },\n  failOnStatusCode: false\n}).its(\"status\").should(\"equal\", 401);",
              "err": {},
              "uuid": "7e5d1530-2f7d-4b12-915b-0ba3f6ff5164",
              "parentUUID": "de10be9e-ca78-4ed1-89f4-f1badf3b1176",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "returns 201 - created",
              "fullTitle": "POST /api/products/:productId/bids returns 201 - created",
              "timedOut": null,
              "duration": 29,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Create a new product\ncy.request({\n  method: \"POST\",\n  url: \"http://localhost:3000/api/products/a0f7c522-78f8-442e-a55d-642cfe566634/bids\",\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  body: {\n    price: 42\n  }\n}).then(response => {\n  // Assert that the response is as expected\n  expect(response.status).to.eq(201);\n  expect(response.body.id).to.be.match(_pattern.UUIDv4);\n  expect(response.body.productId).to.be.match(_pattern.UUIDv4);\n  expect(response.body.price).to.be.a(\"number\");\n  expect(response.body.date).to.match(_pattern.IOS8601);\n  expect(response.body.bidderId).to.match(_pattern.UUIDv4);\n});",
              "err": {},
              "uuid": "e38e9b03-3027-41d9-8e54-7f4fb5dd2a9b",
              "parentUUID": "de10be9e-ca78-4ed1-89f4-f1badf3b1176",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "returns 400 - missing or invalid fields",
              "fullTitle": "POST /api/products/:productId/bids returns 400 - missing or invalid fields",
              "timedOut": null,
              "duration": 30,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Create a new product\ncy.request({\n  method: \"POST\",\n  url: \"http://localhost:3000/api/products/a0f7c522-78f8-442e-a55d-642cfe566634/bids\",\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  body: {\n    // price: 42, missing\n  },\n  failOnStatusCode: false\n}).then(req => {\n  expect(req.status).to.be.eq(400);\n  expect(req.body.error).to.be.eq(\"Invalid or missing fields\");\n  expect(req.body.details).to.exist;\n});",
              "err": {},
              "uuid": "3ff31184-88b3-49b6-b33a-a7d6dcf12f43",
              "parentUUID": "de10be9e-ca78-4ed1-89f4-f1badf3b1176",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "check mutation - object created in database",
              "fullTitle": "POST /api/products/:productId/bids check mutation - object created in database",
              "timedOut": null,
              "duration": 30,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  method: \"POST\",\n  url: \"http://localhost:3000/api/products/a0f7c522-78f8-442e-a55d-642cfe566634/bids\",\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  body: {\n    price: 42\n  }\n}).then(response => {\n  expect(response.status).to.be.eq(201);\n  const newBid = response.body;\n  cy.request(\"http://localhost:3000/api/products/a0f7c522-78f8-442e-a55d-642cfe566634\").then(response => {\n    const product = response.body;\n    expect(product.bids.some(bid => bid.id === newBid.id)).to.be.true;\n  });\n});",
              "err": {},
              "uuid": "3d596db9-fc1e-4090-9498-ccb4bf4bfbe0",
              "parentUUID": "de10be9e-ca78-4ed1-89f4-f1badf3b1176",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "7e5d1530-2f7d-4b12-915b-0ba3f6ff5164",
            "e38e9b03-3027-41d9-8e54-7f4fb5dd2a9b",
            "3ff31184-88b3-49b6-b33a-a7d6dcf12f43",
            "3d596db9-fc1e-4090-9498-ccb4bf4bfbe0"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 116,
          "root": false,
          "rootEmpty": false,
          "_timeout": 2000
        },
        {
          "uuid": "faa74b5a-6572-4e80-8535-8f985d537e3e",
          "title": "DELETE /bids/:bidId",
          "fullFile": "",
          "file": "",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "returns 401 - not authorized",
              "fullTitle": "DELETE /bids/:bidId returns 401 - not authorized",
              "timedOut": null,
              "duration": 27,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  method: \"DELETE\",\n  url: endpoint,\n  headers: {\n    Authorization: `Bearer BAD_TOKEN`\n  },\n  failOnStatusCode: false\n}).its(\"status\").should(\"equal\", 401);",
              "err": {},
              "uuid": "d40763dd-8662-497c-8a8d-c3325fa5ebc3",
              "parentUUID": "faa74b5a-6572-4e80-8535-8f985d537e3e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "returns 204 - success, when owner edit",
              "fullTitle": "DELETE /bids/:bidId returns 204 - success, when owner edit",
              "timedOut": null,
              "duration": 26,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  url: endpoint,\n  method: \"DELETE\",\n  headers: {\n    Authorization: `Bearer ${_tokens.charlyToken}`\n  }\n}).its(\"status\").should(\"equal\", 204);",
              "err": {},
              "uuid": "e3debc47-2536-4eae-abea-1ee117aa92c5",
              "parentUUID": "faa74b5a-6572-4e80-8535-8f985d537e3e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "returns 403 - forbidden, when non owner edit",
              "fullTitle": "DELETE /bids/:bidId returns 403 - forbidden, when non owner edit",
              "timedOut": null,
              "duration": 28,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  url: endpoint,\n  method: \"DELETE\",\n  headers: {\n    Authorization: `Bearer ${_tokens.bobToken}`\n  },\n  failOnStatusCode: false\n}).its(\"status\").should(\"equal\", 403);",
              "err": {},
              "uuid": "8c6dd2c3-58f1-402a-bb9b-8fb67782c198",
              "parentUUID": "faa74b5a-6572-4e80-8535-8f985d537e3e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "returns 204 - success, when admin edit",
              "fullTitle": "DELETE /bids/:bidId returns 204 - success, when admin edit",
              "timedOut": null,
              "duration": 24,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  url: endpoint,\n  method: \"DELETE\",\n  headers: {\n    Authorization: `Bearer ${_tokens.adminToken}`\n  }\n}).its(\"status\").should(\"equal\", 204);",
              "err": {},
              "uuid": "3c692f53-5f7e-477b-8f94-99751db098fe",
              "parentUUID": "faa74b5a-6572-4e80-8535-8f985d537e3e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "returns 404 - not found",
              "fullTitle": "DELETE /bids/:bidId returns 404 - not found",
              "timedOut": null,
              "duration": 26,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  url: \"http://localhost:3000/api/products/not-existing-id\",\n  method: \"DELETE\",\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  failOnStatusCode: false\n}).its(\"status\").should(\"equal\", 404);",
              "err": {},
              "uuid": "a2673f33-a21b-4154-a807-6ac6d7e56931",
              "parentUUID": "faa74b5a-6572-4e80-8535-8f985d537e3e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "check mutation - object deleted in database",
              "fullTitle": "DELETE /bids/:bidId check mutation - object deleted in database",
              "timedOut": null,
              "duration": 34,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  url: \"http://localhost:3000/api/products/a0f7c522-78f8-442e-a55d-642cfe566634\",\n  method: \"GET\",\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  }\n}).then(response => {\n  const product = response.body;\n  expect(product.bids.some(bid => bid.id === \"8ccc6e79-f3c9-43e9-b47e-5be7b84d8de7\")).to.be.true;\n  cy.request({\n    url: endpoint,\n    method: \"DELETE\",\n    headers: {\n      Authorization: `Bearer ${_tokens.charlyToken}`\n    }\n  }).then(response => {\n    expect(response.status).to.be.eq(204);\n    cy.request({\n      url: \"http://localhost:3000/api/products/a0f7c522-78f8-442e-a55d-642cfe566634\",\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${_tokens.aliceToken}`\n      },\n      failOnStatusCode: false\n    }).then(response => {\n      const product = response.body;\n      expect(product.bids.some(bid => bid.id === \"8ccc6e79-f3c9-43e9-b47e-5be7b84d8de7\")).to.be.false;\n    });\n  });\n});",
              "err": {},
              "uuid": "9d20aead-75d4-4399-ad7b-4fd0bfb64bba",
              "parentUUID": "faa74b5a-6572-4e80-8535-8f985d537e3e",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "d40763dd-8662-497c-8a8d-c3325fa5ebc3",
            "e3debc47-2536-4eae-abea-1ee117aa92c5",
            "8c6dd2c3-58f1-402a-bb9b-8fb67782c198",
            "3c692f53-5f7e-477b-8f94-99751db098fe",
            "a2673f33-a21b-4154-a807-6ac6d7e56931",
            "9d20aead-75d4-4399-ad7b-4fd0bfb64bba"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 165,
          "root": false,
          "rootEmpty": false,
          "_timeout": 2000
        },
        {
          "uuid": "92e43f65-f027-49c2-8ca1-0e4d33fea02d",
          "title": "GET /api/users/:userId",
          "fullFile": "",
          "file": "",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "returns 404 - not found",
              "fullTitle": "GET /api/users/:userId returns 404 - not found",
              "timedOut": null,
              "duration": 29,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request({\n  url: \"http://localhost:3000/api/users/not-existing-id\",\n  failOnStatusCode: false\n}).its(\"status\").should(\"equal\", 404);",
              "err": {},
              "uuid": "efb3dd1f-fb65-495a-83f5-81f62ef272cf",
              "parentUUID": "92e43f65-f027-49c2-8ca1-0e4d33fea02d",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "returns 200 - success",
              "fullTitle": "GET /api/users/:userId returns 200 - success",
              "timedOut": null,
              "duration": 124,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.request(\"http://localhost:3000/api/users/1f2fadb1-0d7e-47a7-9d5b-ed031d665d3e\").then(response => {\n  expect(response.status).to.be.eq(200);\n  expect(response.headers[\"content-type\"]).to.contains(\"application/json\");\n  const user = response.body;\n  expect(user.id).to.eq(\"1f2fadb1-0d7e-47a7-9d5b-ed031d665d3e\");\n  expect(user.username).to.be.eq(\"alice\");\n  expect(user.admin).to.be.false;\n  for (let product of user.products) {\n    expect(product.id).to.be.a(\"string\");\n    expect(product.id).to.match(_pattern.UUIDv4);\n    expect(product.description).to.be.a(\"string\");\n    expect(product.category).to.be.a(\"string\");\n    expect(product.originalPrice).to.be.a(\"number\");\n    expect(product.pictureUrl).to.be.a(\"string\");\n    expect(product.endDate).to.be.a(\"string\");\n    expect(product.endDate).to.match(_pattern.IOS8601);\n  }\n  for (let bid of user.bids) {\n    expect(bid.id).to.be.a(\"string\");\n    expect(bid.id).to.match(_pattern.UUIDv4);\n    expect(bid.price).to.be.a(\"number\");\n    expect(bid.date).to.be.a(\"string\");\n    expect(bid.date).to.match(_pattern.IOS8601);\n    expect(bid.product.id).to.a(\"string\");\n    expect(bid.product.id).to.match(_pattern.UUIDv4);\n    expect(bid.product.name).to.a(\"string\");\n  }\n});",
              "err": {},
              "uuid": "e70fb943-9bc9-4943-b8e3-a6b1ead4dcac",
              "parentUUID": "92e43f65-f027-49c2-8ca1-0e4d33fea02d",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "efb3dd1f-fb65-495a-83f5-81f62ef272cf",
            "e70fb943-9bc9-4943-b8e3-a6b1ead4dcac"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 153,
          "root": false,
          "rootEmpty": false,
          "_timeout": 2000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 2000
    }
  ],
  "meta": {
    "mocha": {
      "version": "7.0.1"
    },
    "mochawesome": {
      "options": {
        "quiet": false,
        "reportFilename": "mochawesome",
        "saveHtml": false,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "7.1.3"
    },
    "marge": {
      "options": {
        "reportDir": "cypress/results",
        "overwrite": false,
        "html": false,
        "json": true
      },
      "version": "6.2.0"
    }
  }
}